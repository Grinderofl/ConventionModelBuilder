version: 1.0.{build}
pull_requests:
  do_not_increment_build_number: true
os: Visual Studio 2015
configuration: Release
platform: Any CPU
shallow_clone: true
environment:
  DNX_BUILD_VERSION: alpha
install:
- cmd: >-
    echo %DNX_BUILD_VERSION%

    echo %WEBPROJ_ENABLEBETA7RENAMES%

    echo on

    set PATH=C:\Program Files (x86)\MSBuild\14.0\Bin;%PATH%

    dnvm update-self

    dnvm install 1.0.0-beta8

    dnvm setup

    dnvm exec 1.0.0-beta8 dnu restore --quiet --parallel
nuget:
  disable_publish_on_pr: true
build:
  project: FluentModelBuilder.sln
  publish_nuget: true
  publish_nuget_symbols: true
  verbosity: minimal
test_script:
- cmd: >-
    echo on

    echo %CD%

    cd ./test/FluentModelBuilder.Tests

    dnvm exec 1.0.0-beta8 dnx test
artifacts:
- path: '**\*.nupkg'
