{"name":"FluentModelBuilder","tagline":"Fluently configure EntityFramework 7 DbContext","body":"# FluentModelBuilder\r\n\r\nProvides a provider for Entity Framework 7 that helps configure `ModelBuilder` from outside `DbContext`, with a fluent interface, convention-based assembly scanning, and useful set of extension methods to suit different convention situations of model alterations.\r\n\r\n## Goals\r\n\r\nThe default way of creating the backing model to use with EntityFramework 7 DbContext __requires__ subclassing:\r\n\r\n```c#\r\npublic class ApplicationContext : DbContext\r\n{\r\n  public DbSet<EntityOne> EntityOnes { get; set; } // Available as both context.EntityOnes and context.Set<EntityOne>();\r\n  public DbSet<EntityTwo> EntityTwos { get; set; } // Available as both context.EntityTwos and context.Set<EntityTwo>();\r\n  \r\n  protected override void OnModelCreating(ModelBuilder builder)\r\n  {\r\n    // Alternatively:\r\n    builder.Entity<EntityThree>(); // Available as context.Set<EntityThree>();\r\n  }\r\n}\r\n```\r\n\r\nFluentModelBuilder aims to provide an alternative way to add and configure those entities on your data model as well as add old-style class-based `EntityTypeConfiguration<>`-esque mapping overrides for each entity. It also enables including a well-defined non-abstract DbContext in the service provider, with a fully configured non-prebuilt `IModel`, which is not possible with standard Entity Framework 7.\r\n\r\n# Quick start\r\n\r\nEasiest way to get started is to set up an impromptu DbContext while configuring services, like in `Configure(IServiceCollection)` method in an ASP.NET 5 Web Application:\r\n\r\n```c#\r\npublic void Configure(IServiceCollection services)\r\n{\r\n  services.AddEntityFramework()\r\n    .AddSqlServerFluentModelBuilder()\r\n    .AddDbContext<DbContext>(dbContextOptions => {\r\n      dbContextOptions.ConfigureModel() \r\n        .DiscoverEntitiesFromSharedAssemblies(entity => // Scans assemblies for entities\r\n          entity\r\n            .Namespace(ns => ns.EndsWith(\"Domain\")) // Namespace criterion\r\n            .BaseType<EntityBase>()) // Only if base type matches\r\n        .DiscoverOverridesFromSharedAssemblies() // Scans assemblies for overrides\r\n        .AddAssemblyContaining<YourEntity>() // Specifies which assembly to scan\r\n        .WithSqlServerDatabase(\"... connectionstring ...\"); // Specifies to use SQL Server as well as connection string\r\n}\r\n```\r\n\r\nAlternatively, you can use the `OnConfiguring(DbContextOptions)` override in your DbContext:\r\n\r\n```c#\r\npublic class MyContext : DbContext\r\n{\r\n  protected override void OnConfiguring(DbContextOptionsBuilder builder)\r\n  {\r\n    builder.ConfigureModel()\r\n      .DiscoverEntitiesFromSharedAssemblies(entity => // Scans assemblies for entities\r\n        entity\r\n          .Namespace(ns => ns.EndsWith(\"Domain\")) // Namespace criterion\r\n          .BaseType<EntityBase>()) // Only if base type matches\r\n      .DiscoverOverridesFromSharedAssemblies() // Scans assemblies for overrides\r\n      .AddAssemblyContaining<YourEntity>() // Specifies which assembly to scan\r\n      .WithSqlServerDatabase(\"... connectionstring ...\"); // Specifies to use SQL Server as well as connection string\r\n  }\r\n}\r\n```\r\n\r\n# Usage guide\r\n## Entity configuration\r\nEntities are configured via the `Entities()` method, which exposes `Action<EntitiesBuilder>` as parameter\r\n```c#\r\nConfigureModel().Entities(x => {});\r\n```\r\n\r\n### Adding single entities\r\n```c#\r\nEntities(entities => \r\n{\r\n    entities.Add<SingleEntity>();\r\n    entities.Add(typeof(SingleEntity));\r\n});\r\n```\r\n\r\n### TODO\r\n\r\n\r\n## NuGet:\r\n\r\n* https://www.nuget.org/packages/FluentModelBuilder/\r\n* https://www.nuget.org/packages/FluentModelBuilder.Sqlite/\r\n* https://www.nuget.org/packages/FluentModelBuilder.SqlServer/\r\n* https://www.nuget.org/packages/FluentModelBuilder.InMemory/\r\n\r\n## Build status\r\n[![Build status](https://ci.appveyor.com/api/projects/status/yccb8ad2msd26bad/branch/master?svg=true)](https://ci.appveyor.com/project/Grinderofl/fluentmodelbuilder/branch/master)\r\n","google":"UA-69079635-1","note":"Don't delete this file! It's used internally to help with page regeneration."}